"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Provides default values for certain regional information points.
 */
class Default {
    /**
     * Computes a "standard" AWS Service principal for a given service, region and suffix. This is useful for example when
     * you need to compute a service principal name, but you do not have a synthesize-time region literal available (so
     * all you have is `{ "Ref": "AWS::Region" }`). This way you get the same defaulting behavior that is normally used
     * for built-in data.
     *
     * @param service   the name of the service (s3, s3.amazonaws.com, ...)
     * @param region    the region in which the service principal is needed.
     * @param urlSuffix the URL suffix for the partition in which the region is located.
     */
    static servicePrincipal(service, region, urlSuffix) {
        const matches = service.match(/^([^.]+)(?:\.amazonaws\.com(?:\.cn)?)?$/);
        if (!matches) {
            // Return "service" if it does not look like any of the following:
            // - s3
            // - s3.amazonaws.com
            // - s3.amazonaws.com.cn
            return service;
        }
        service = matches[1]; // Simplify the service name down to something like "s3"
        switch (service) {
            // Services with a regional AND partitional principal
            case 'codedeploy':
            case 'logs':
                return `${service}.${region}.${urlSuffix}`;
            // Services with a regional principal
            case 'states':
                return `${service}.${region}.amazonaws.com`;
            // Services with a universal principal across all regions/partitions
            case 'sns':
            case 'sqs':
                return `${service}.amazonaws.com`;
            // Services with a partitional principal (the default case)
            case 'application-autoscaling':
            case 'autoscaling':
            case 'ec2':
            case 'events':
            case 'lambda':
            default:
                return `${service}.${urlSuffix}`;
        }
    }
    constructor() { }
}
exports.Default = Default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRlZmF1bHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7R0FFRztBQUNILE1BQWEsT0FBTztJQUNsQjs7Ozs7Ozs7O09BU0c7SUFDSSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBZSxFQUFFLE1BQWMsRUFBRSxTQUFpQjtRQUMvRSxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7UUFDekUsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNaLGtFQUFrRTtZQUNsRSxPQUFPO1lBQ1AscUJBQXFCO1lBQ3JCLHdCQUF3QjtZQUN4QixPQUFPLE9BQU8sQ0FBQztTQUNoQjtRQUVELE9BQU8sR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyx3REFBd0Q7UUFDOUUsUUFBUSxPQUFPLEVBQUU7WUFDZixxREFBcUQ7WUFDckQsS0FBSyxZQUFZLENBQUM7WUFDbEIsS0FBSyxNQUFNO2dCQUNULE9BQU8sR0FBRyxPQUFPLElBQUksTUFBTSxJQUFJLFNBQVMsRUFBRSxDQUFDO1lBRTdDLHFDQUFxQztZQUNyQyxLQUFLLFFBQVE7Z0JBQ1gsT0FBTyxHQUFHLE9BQU8sSUFBSSxNQUFNLGdCQUFnQixDQUFDO1lBRTlDLG9FQUFvRTtZQUNwRSxLQUFLLEtBQUssQ0FBQztZQUNYLEtBQUssS0FBSztnQkFDUixPQUFPLEdBQUcsT0FBTyxnQkFBZ0IsQ0FBQztZQUVwQywyREFBMkQ7WUFDM0QsS0FBSyx5QkFBeUIsQ0FBQztZQUMvQixLQUFLLGFBQWEsQ0FBQztZQUNuQixLQUFLLEtBQUssQ0FBQztZQUNYLEtBQUssUUFBUSxDQUFDO1lBQ2QsS0FBSyxRQUFRLENBQUM7WUFDZDtnQkFDRSxPQUFPLEdBQUcsT0FBTyxJQUFJLFNBQVMsRUFBRSxDQUFDO1NBQ3BDO0lBQ0gsQ0FBQztJQUVELGdCQUF3QixDQUFDO0NBQzFCO0FBakRELDBCQWlEQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUHJvdmlkZXMgZGVmYXVsdCB2YWx1ZXMgZm9yIGNlcnRhaW4gcmVnaW9uYWwgaW5mb3JtYXRpb24gcG9pbnRzLlxuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdCB7XG4gIC8qKlxuICAgKiBDb21wdXRlcyBhIFwic3RhbmRhcmRcIiBBV1MgU2VydmljZSBwcmluY2lwYWwgZm9yIGEgZ2l2ZW4gc2VydmljZSwgcmVnaW9uIGFuZCBzdWZmaXguIFRoaXMgaXMgdXNlZnVsIGZvciBleGFtcGxlIHdoZW5cbiAgICogeW91IG5lZWQgdG8gY29tcHV0ZSBhIHNlcnZpY2UgcHJpbmNpcGFsIG5hbWUsIGJ1dCB5b3UgZG8gbm90IGhhdmUgYSBzeW50aGVzaXplLXRpbWUgcmVnaW9uIGxpdGVyYWwgYXZhaWxhYmxlIChzb1xuICAgKiBhbGwgeW91IGhhdmUgaXMgYHsgXCJSZWZcIjogXCJBV1M6OlJlZ2lvblwiIH1gKS4gVGhpcyB3YXkgeW91IGdldCB0aGUgc2FtZSBkZWZhdWx0aW5nIGJlaGF2aW9yIHRoYXQgaXMgbm9ybWFsbHkgdXNlZFxuICAgKiBmb3IgYnVpbHQtaW4gZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHNlcnZpY2UgICB0aGUgbmFtZSBvZiB0aGUgc2VydmljZSAoczMsIHMzLmFtYXpvbmF3cy5jb20sIC4uLilcbiAgICogQHBhcmFtIHJlZ2lvbiAgICB0aGUgcmVnaW9uIGluIHdoaWNoIHRoZSBzZXJ2aWNlIHByaW5jaXBhbCBpcyBuZWVkZWQuXG4gICAqIEBwYXJhbSB1cmxTdWZmaXggdGhlIFVSTCBzdWZmaXggZm9yIHRoZSBwYXJ0aXRpb24gaW4gd2hpY2ggdGhlIHJlZ2lvbiBpcyBsb2NhdGVkLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXJ2aWNlUHJpbmNpcGFsKHNlcnZpY2U6IHN0cmluZywgcmVnaW9uOiBzdHJpbmcsIHVybFN1ZmZpeDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBtYXRjaGVzID0gc2VydmljZS5tYXRjaCgvXihbXi5dKykoPzpcXC5hbWF6b25hd3NcXC5jb20oPzpcXC5jbik/KT8kLyk7XG4gICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICAvLyBSZXR1cm4gXCJzZXJ2aWNlXCIgaWYgaXQgZG9lcyBub3QgbG9vayBsaWtlIGFueSBvZiB0aGUgZm9sbG93aW5nOlxuICAgICAgLy8gLSBzM1xuICAgICAgLy8gLSBzMy5hbWF6b25hd3MuY29tXG4gICAgICAvLyAtIHMzLmFtYXpvbmF3cy5jb20uY25cbiAgICAgIHJldHVybiBzZXJ2aWNlO1xuICAgIH1cblxuICAgIHNlcnZpY2UgPSBtYXRjaGVzWzFdOyAvLyBTaW1wbGlmeSB0aGUgc2VydmljZSBuYW1lIGRvd24gdG8gc29tZXRoaW5nIGxpa2UgXCJzM1wiXG4gICAgc3dpdGNoIChzZXJ2aWNlKSB7XG4gICAgICAvLyBTZXJ2aWNlcyB3aXRoIGEgcmVnaW9uYWwgQU5EIHBhcnRpdGlvbmFsIHByaW5jaXBhbFxuICAgICAgY2FzZSAnY29kZWRlcGxveSc6XG4gICAgICBjYXNlICdsb2dzJzpcbiAgICAgICAgcmV0dXJuIGAke3NlcnZpY2V9LiR7cmVnaW9ufS4ke3VybFN1ZmZpeH1gO1xuXG4gICAgICAvLyBTZXJ2aWNlcyB3aXRoIGEgcmVnaW9uYWwgcHJpbmNpcGFsXG4gICAgICBjYXNlICdzdGF0ZXMnOlxuICAgICAgICByZXR1cm4gYCR7c2VydmljZX0uJHtyZWdpb259LmFtYXpvbmF3cy5jb21gO1xuXG4gICAgICAvLyBTZXJ2aWNlcyB3aXRoIGEgdW5pdmVyc2FsIHByaW5jaXBhbCBhY3Jvc3MgYWxsIHJlZ2lvbnMvcGFydGl0aW9uc1xuICAgICAgY2FzZSAnc25zJzpcbiAgICAgIGNhc2UgJ3Nxcyc6XG4gICAgICAgIHJldHVybiBgJHtzZXJ2aWNlfS5hbWF6b25hd3MuY29tYDtcblxuICAgICAgLy8gU2VydmljZXMgd2l0aCBhIHBhcnRpdGlvbmFsIHByaW5jaXBhbCAodGhlIGRlZmF1bHQgY2FzZSlcbiAgICAgIGNhc2UgJ2FwcGxpY2F0aW9uLWF1dG9zY2FsaW5nJzpcbiAgICAgIGNhc2UgJ2F1dG9zY2FsaW5nJzpcbiAgICAgIGNhc2UgJ2VjMic6XG4gICAgICBjYXNlICdldmVudHMnOlxuICAgICAgY2FzZSAnbGFtYmRhJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBgJHtzZXJ2aWNlfS4ke3VybFN1ZmZpeH1gO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7IH1cbn1cbiJdfQ==