# EC2

EC2 o "Elastic Compute Cloud" es un servicio de AWS que permite la creaci칩n de maquinas virtuales Linux o Windows. Es uno de los servicios m치s antiguos de la plataforma, y uno de los m치s potentes. 

Muchos otros servicios de AWS utilizan este servicio por debajo.

---

## 游눹 DEMO #1 ~ Levantar una instancia de Amazon Linux 2 en la nube

### Procedimiento

1. Acceder al dashboard de EC2.
2. Hacer click en `Launch Instance`.
3. Seleccionar la AMI `Amazon Linux 2 AMI (HVM)`.
4. Seleccionar el tipo de instancia `t2.micro` (seleccionada por defecto).
5. Hacer click en `Review and Launch`.
6. Hacer click en `Launch`.
7. 仇勇뀹eleccionar la opci칩n `Create a new key pair`.
8. 仇勇뀬scribir el nombre de la nueva llave.
9. 仇勇뀯acer click en `Download Key Pair`.
10. 仇勇뀯acer click en `Launch Instances`.
11. Hacer click en `View Instances`.

### 仇勇뀨tenci칩n

Tenga especial precauci칩n al momento de crear la llave. Solamente se le permitir치 descargarla una sola vez. Debe almacenarla en un lugar seguro al que tenga acceso. Si pierde esta llave no podr치 conectarse a su instancia.

### FAQ

**쯈ue es una AMI?**

Es un `template` que contiene una configuraci칩n de software: un sistema operativo, m치s aplicaciones, m치s configuraci칩n.

**쯈ue es una instancia?**

Una copia de una `AMI` que se encuentra ejecutando como una maquina virtual en la nube.

**쮸 que se refiere por el tipo de instancia?**

AWS permite crear instancias con distinto hardware (CPU, RAM, GPU, ancho de banda, etc). Dependiendo del rol que deba cumplir la instancia, es el timpo que tenemos que seleccionar.

---

![AMI e instancias](../imagenes/013.png)

Por defecto, AWS nos provee una gran lista de `AMI` basicas que podemos usar para levantar nuestras maquinas virtuales. Las mismas cuentan con distintos distros de Linux o versiones de Windows, con determinado software pre-instalado.

Tambi칠n existe un `Marketplace` en donde terceros p칰blican sus propias `AMI` configuradas con determinadas aplicaciones. Es importante tener presente que algunas de estas `AMI` pueden incurrir costos adicionales por el uso de licencias. Vendors como `CISCO` publican ah칤 sus productos para que sean utilizados dentro de la nube de AWS.

Adem치s de seleccionar la instancia, debemos seleccionar que "tipo" de instancia queremos utilizar. Esto es, que configuraci칩n de hardware necesitamos asignarle a esta instancia para que cumpla con nuestros propositos. AWS nos ofrece una gran variedad de familias de tipos de instancias, pensadas para un proposito en particular. Por ejemplo, la familia `c` corresponde a maquina pensadas para tareas de computo intensivas, mientras que las familias `t` y `m` son para tareas generales.

Para poder acceder a nuestra instancia tenemos que indicarle a AWS que llave SSH queremos utilizar. Este es el metodo que AWS nos brinda para conectarnos a nuestras instancias. Es nuestra responsabilidad mantener de forma segura las llaves privadas necesarias para acceder a las instancias. Si no contamos con una llave privada al momento de levantar la instancia, AWS nos da la opci칩n de crear una. El resultado ser치 la generaci칩n de una llave privada que se descargara en nuestra maquina. AWS indica que no almacena de ninguna manera esta llave, por lo que si la perdemos no tenemos forma de recuperarla. En el caso de que queramos subir una llave privada existente, existen mecanismos para utilizarla.

---

## 游눹 DEMO #2 ~ Conexi칩n SSH a nueva instancia

#### 游뚿 Atenci칩n 游뚿
Para poder utilizar la llave privada descargada desde Putty en Windows, es necesario convertirla. El procedimiento para realizarlo se encuentra en [el siguiente link](https://aws.amazon.com/premiumsupport/knowledge-center/convert-pem-file-into-ppk/).

Para poder utilizar la llave privada descargada con `ssh` es necesario modificarle sus permisos para que solo pueda ser le칤da por el usuario.

```bash
chmod 400 <llave_privada>.pem
```

### Procedimiento

1. Obtenemos la `IP` p칰blica asignada a nuestra reci칠n creada instancia.
2. Utilizando `ssh` desde la consola o `Putty` nos conectamos a la instancia.

### FAQ

**쯈ue usuario utilizo para la conexi칩n?**

Cada `AMI` tiene configurado un usuario distinto por defecto. Para el caso de `Amazon Linux 2` el usuario es `ec2_user`. Sin embargo, para la `AMI` de Ubuntu el usuario es `ubuntu`.

---

Si investigamos los detalles de la instancia creada vamos a ver que la misma tiene asociada una gran cantidad de recursos adicionales. En las siguiente secciones explicaremos algunos de ellos, y como su configuraci칩n afecta el comportamiento de la instancia.

---

## 游눹 DEMO #3 ~ Terminar una instancia <a name="demo003"></a>

### Procedimiento

1. Seleccionamos la instancia que queremos elminar.
2. Vamos a `Actions > Instance State > Terminate`.
3. Hacemos click en `Yes, Terminante`.

### FAQ

**쮼xiste alguna forma de proteger la terminaci칩n de una instancia?**

Si. Se puede proteger mediante funcionalidades de EC2, o mediante una asignaci칩n apropiada de permisos de usuario.

**쯈ue pasa con los datos almacenados en la instancia?**

Por defecto, los volumenes cargados a la instancia son eliminados a menos que se haya determinado lo contrario al momento de configurarlos. A continuaci칩n hablaremos un poco m치s sobre los volumenes de las instancias.

---
<div style="width: 100%">
  <div style="float: left"><a href="../guias/03_demo.md">拘勇03 - DEMO</a></div>
  <div style="float: right"><a href="../guias/05_vpc.md">05 - VPC 俱뫮잺</a></div>
</div>